<!DOCTYPE html>
<html lang="zh_CN"><head>
    <meta charset="utf-8"><title>八股汇总｜计算机网络&nbsp;-&nbsp;XUN</title>

    <meta name="theme-color" content="#e0e0e0">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="msapplication-navbutton-color" content="#e0e0e0">
    <meta name="apple-mobile-web-app-status-bar-style" content="#e0e0e0">
    
    
    <link rel="icon" type="image/png" href="/HQL.ico">
    
    
    
     
    
    <link rel="stylesheet" href="https://cenjianxun.github.io/scss/main.min.e5295e285c64657d4f07ae8c8ebf5825bc5ecf38f1250bc775257874f6cd1a4f.css">
    
    
    <script type="text/javascript" src="/js/main.js" defer></script>
</head><body class="mytheme">
  <div class="body-container">
    <aside>
    <div class="nav-title">
        <a href="/" target="_blank">XUN</a>
    </div>
    <section class="sidebar">
        <div id="sidebar-info" class="sidebar-info">
            <div class="sidebar-about">
                <p class="lead">
                    想写一个播放器想写一个传输工具想写一个通讯工具想在高速公路上自由coding一边听歌如果一个古代人技能点是写代码怎么办
                </p>
            </div>
            <div class="count">文章</div>
            <div class="social">
                <a href="https://github.com/cenjianxun" target="_blank" rel="noopener noreferrer">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-github">
                        <path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"/>
                        <path d="M9 18c-4.51 2-5-2-7-2"/> 
                        </svg>
                </a>
                <a href="" target="_blank" rel="noopener noreferrer">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor"  stroke-linecap="round" stroke-linejoin="round"
                        class="lucide lucide-twitter">
                        <path
                            d="M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z">
                        </path>
                    </svg>
                </a>
                <a href=""  target="_blank" rel="noopener noreferrer">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                        class="lucide lucide-mail">
                        <rect width="20" height="16" x="2" y="4" rx="2"></rect>
                        <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path>
                    </svg>
                </a>
                <a href=""  target="_blank" rel="noopener noreferrer">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                        class="lucide lucide-rss">
                        <path d="M4 11a9 9 0 0 1 9 9"></path>
                        <path d="M4 4a16 16 0 0 1 16 16"></path>
                        <circle cx="5" cy="19" r="1"></circle>
                    </svg>
                </a>
            </div>
        </div>
        
        
            

<div id="sidebar-toc" class="sidebar-toc">
    
    <header>
        <span class="toc-bar"></span>
        <h4 class="toc-header">八股汇总｜计算机网络</h4>
        <span class="toc-bar"></span>
    </header>
    
    <nav id="TableOfContents">
  <ul>
    <li><a href="#网络模型">网络模型</a></li>
    <li><a href="#输入url发生什么">输入url发生什么</a></li>
    <li><a href="#tcp-vs-udp">TCP vs UDP</a></li>
    <li><a href="#三次握手-四次挥手">三次握手 四次挥手</a>
      <ul>
        <li><a href="#三次握手">三次握手</a>
          <ul>
            <li><a href="#为什么要三次">为什么要三次:</a></li>
          </ul>
        </li>
        <li><a href="#四次挥手">四次挥手</a>
          <ul>
            <li><a href="#为什么要四次">为什么要四次：</a></li>
            <li><a href="#time_wait">TIME_WAIT</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>
</div>
 


<script type="text/javascript" src="/js/toc.js" defer></script>




        

    </section>
    <section class="func">
        <div id="func-top" class="to-top">
            <a href="#top" target="_self">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 28 28" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    class="lucide lucide-arrow-big-up-dash">
                    <path d="M9 19h6" />
                    <path d="M9 15v-3H5l7-7 7 7h-4v3H9z" />
                </svg>
            </a>
        </div>
    </section>
</aside>
    <div class="content-container">
      <nav class="nav-container">
    <div class="nav-title">
        <a href="/" target="_blank">XUN</a>
    </div>
    <button type="button" class="drop-menu-button">
        <span class="menu-bar"></span>
        <span class="menu-bar"></span>
        <span class="menu-bar"></span>
    </button>
    <ul class="nav-menu-items"><li class="menu-item">
            <a href="/" target="_self">HOME</a>
        </li><li class="menu-item">
            <a href="/archive/" target="_self">ARCHIVE</a>
        </li><li class="menu-item">
            <a href="/notes/" target="_self">NOTES</a>
        </li><li class="menu-item">
            <a href="/about/" target="_self">ABOUT</a>
        </li>
    </ul>


</nav>
      <main class="content">
        <div class="page"><article class="post-block">
    <header class="post-header">
        <h1>八股汇总｜计算机网络</h1>
        <div class="post-time">Jun 21 2019</div>
    </header>

    
    <div class="post-content"><p>一些基础概念。</p>
<h2 id="网络模型">网络模型 <a href="#%e7%bd%91%e7%bb%9c%e6%a8%a1%e5%9e%8b" style="border:none;"></a></h2><ul>
<li>应用层  Application Layer</li>
<li>Protocol：HTTP</li>
<li>传输层  Transport Layer</li>
<li>Protocol：TCP/ UDP</li>
<li>网络层 <em>Internet Layer</em></li>
<li>Protocol：IP</li>
</ul>
<h2 id="输入url发生什么">输入url发生什么 <a href="#%e8%be%93%e5%85%a5url%e5%8f%91%e7%94%9f%e4%bb%80%e4%b9%88" style="border:none;"></a></h2><ol>
<li>url 解析 parsing<br>
解析并生成HTTP消息</li>
<li>发送之前找ip<br>
本地浏览器缓存 -&gt; 本地host -&gt;本地DNS解析器缓存 -&gt; 本地DNSserver<br>
-&gt;( - 主域名server，返回<br>
- 顶级域名server，返回<br>
- 根域名server，返回 )<br>
-&gt; 返回本地DNSserver -&gt;返回client</li>
<li>获取ip后，把 HTTP 的传输工作交给操作系统中的协议栈<br>
include：TCP/ UDP + IP
<ul>
<li>TCP:三次握手+ 传输报文<br>
TCP 模块在执行连接、收发、断开等各阶段操作时，都需要委托 IP 模块将数据封装成<strong>网络包</strong>发送给通信对象。<br>
生成IP报文 + MAC包头</li>
</ul>
</li>
<li>通过网卡，路由器传给server<br>
server逐层去掉头部拿出content，处理数据。返回响应<br>
响应添加头部传给client</li>
<li>client去掉头部，渲染网页<br>
解析html css 构建dom，渲染tree，绘制节点</li>
<li>TCP4次挥手断开连接</li>
</ol>
<h2 id="tcp-vs-udp">TCP vs UDP <a href="#tcp-vs-udp" style="border:none;"></a></h2><ul>
<li>连接：<br>
TCP传数据之前要连接，UDP不需要连直接传</li>
<li>服务对象：<br>
TCP 一对一，UDP支持一对一，一对多，多对多</li>
<li>可靠性：<br>
TCP：可靠。不丢不错按顺序<br>
UDP：可能丢</li>
<li>拥塞控制、流量控制<br>
TCP有，保证安全<br>
UDP没有，即使网络很堵，也不影响UDP发送速率</li>
<li>首部开销<br>
TCP首部长开销大，还可能变长<br>
UDP首部只有8字节，且固定</li>
<li>传输方式<br>
TCP 流式传输，没有边界，保证顺序可靠<br>
UDP 一个包一个包发送，有边界，可能丢包或乱序</li>
<li>分片<br>
如果过大TCP在传输层分片，UDP在IP层分片</li>
<li>应用场景：<br>
TCP：用于 FTP，HTTP/HTTPS<br>
UDP: 视频音频广播</li>
</ul>
<h2 id="三次握手-四次挥手">三次握手 四次挥手 <a href="#%e4%b8%89%e6%ac%a1%e6%8f%a1%e6%89%8b-%e5%9b%9b%e6%ac%a1%e6%8c%a5%e6%89%8b" style="border:none;"></a></h2><p>字段</p>
<ul>
<li>seq：（sequence number）序号</li>
<li>ack：（acknowledgement number）确认号</li>
<li>标志位：
<ul>
<li>SYN: (SYNchronization) 同步</li>
<li>ACK: (ACKnowlegment) 确认</li>
<li>FIN: (FINish) 终止</li>
</ul>
</li>
</ul>
<h3 id="三次握手">三次握手 <a href="#%e4%b8%89%e6%ac%a1%e6%8f%a1%e6%89%8b" style="border:none;"></a></h3><ol>
<li>client: SYN=1，seq=x<br>
如果丢失，会重传</li>
<li>sever: SYN=1，seq=y， ACK=1，ack=x+1<br>
如果丢失，1和2都会重传</li>
<li>client: eq=x+1, ACK=1,  ack=y+1<br>
如果丢失，2会重传<br>
第三次握手可以携带数据，前两次握手不可以携带数据</li>
</ol>
<h4 id="为什么要三次">为什么要三次: <a href="#%e4%b8%ba%e4%bb%80%e4%b9%88%e8%a6%81%e4%b8%89%e6%ac%a1" style="border:none;"></a></h4><ul>
<li>可以防止旧的重复连接初始化造成混乱</li>
<li>可以同步双方的初始序列号</li>
<li>可以避免资源浪费</li>
</ul>
<p><em>因为别人给你发了第一条，就表示你可以发数据了，这时可能是旧消息，它来了你就直接发数据这不好吧。</em></p>
<h3 id="四次挥手">四次挥手 <a href="#%e5%9b%9b%e6%ac%a1%e6%8c%a5%e6%89%8b" style="border:none;"></a></h3><ol>
<li>c: FIN=1，seq=u</li>
<li>s:               seq=v,     ACK=1，ack=u+1</li>
<li>s: FIN=1，seq=w，  ACK=1，ack=u+1</li>
<li>c:              seq=u+1, ACK=1，ack=w+1</li>
</ol>
<h4 id="为什么要四次">为什么要四次： <a href="#%e4%b8%ba%e4%bb%80%e4%b9%88%e8%a6%81%e5%9b%9b%e6%ac%a1" style="border:none;"></a></h4><p>哪一端发fin，表示它不再发送，但它还可以接受。那如果它收到fin，要处理一下自己最后要发送的发送出去。</p>
<h4 id="time_wait">TIME_WAIT <a href="#time_wait" style="border:none;"></a></h4><p>等待时间是2MSL 相当于至少允许报文丢失一次。</p>
<p>收到fin就会重置计时器。</p>
<p>主动发起的一方才会有。</p>
<p>为什么需要它？</p>
<ul>
<li>防止历史连接中的数据，被后面重新开始的连接错误的接收<br>
这个时长可以让两个方向的数据包都被丢弃</li>
<li>保证「被动关闭连接」的一方，能被正确的关闭<br>
如果直接关了，④发的ack又丢了，③就要重传，这时④已经关了，就会异常终止。</li>
</ul></div>

    <div class="post-meta meta">
        

        <span class="tags-box">
            <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512" fill="currentColor"
                class="fas-tags">
                <path
                    d="M345 39.1L472.8 168.4c52.4 53 52.4 138.2 0 191.2L360.8 472.9c-9.3 9.4-24.5 9.5-33.9 .2s-9.5-24.5-.2-33.9L438.6 325.9c33.9-34.3 33.9-89.4 0-123.7L310.9 72.9c-9.3-9.4-9.2-24.6 .2-33.9s24.6-9.2 33.9 .2zM0 229.5V80C0 53.5 21.5 32 48 32H197.5c17 0 33.3 6.7 45.3 18.7l168 168c25 25 25 65.5 0 90.5L277.3 442.7c-25 25-65.5 25-90.5 0l-168-168C6.7 262.7 0 246.5 0 229.5zM144 144a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z" />
            </svg>
            
            
            <a class="tag-link" href="/%20/tags/web">Web</a>
            
            ,&nbsp;
            <a class="tag-link" href="/%20/tags/%E5%85%AB%E8%82%A1">八股</a>
            
        </span>
        
    </div>

    <div class="post-paginator">
        
        
        <span class="pag-prev">
            
            
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"
                class="lucide lucide-arrow-left-from-line">
                <path d="M3 19V5" />
                <path d="m13 6-6 6 6 6" />
                <path d="M7 12h14" />
            </svg>
            </svg>
            <a href="https://cenjianxun.github.io/posts/%E6%80%BB%E7%BB%93unix%E5%9F%BA%E7%A1%80/" class="jump-post">总结｜unix基础</a>
            
        </span>

        <span class="pag-next">
            
            
            <a href="https://cenjianxun.github.io/posts/%E5%85%AB%E8%82%A1%E6%B1%87%E6%80%BB%E6%95%B0%E6%8D%AE%E5%BA%93/" class="jump-post">八股汇总｜数据库</a>
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"
                class="lucide lucide-arrow-right-to-line">
                <path d="M17 12H3" />
                <path d="m11 18 6-6-6-6" />
                <path d="M21 5v14" />
            </svg>
            
        </span>

    </div>

    

</article>


    </div>
      </main>
      <footer class="footer">
    <p> © 2018 - 2024 &nbsp; XUN
    </p>
</footer>


    </div>
  </div>
</body>
</html>