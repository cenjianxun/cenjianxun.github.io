<!DOCTYPE html>
<html lang="zh_CN"><head>
    <meta charset="utf-8"><title>操作｜shell命令&nbsp;-&nbsp;XUN</title>

    <meta name="theme-color" content="#e0e0e0">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="msapplication-navbutton-color" content="#e0e0e0">
    <meta name="apple-mobile-web-app-status-bar-style" content="#e0e0e0">
    
    
    <link rel="icon" type="image/png" href="/HQL.ico">
    
    
    
     
    
    <link rel="stylesheet" href="https://cenjianxun.github.io/scss/main.min.60997ce2e60178efc70b7ec7dd8aebee61a7aa482594eb11440473ba9a39fbbf.css">
    
    
    <script type="text/javascript" src="/js/main.js" defer></script>
</head><body class="mytheme">
  <div class="body-container">
    <aside>
    <div class="nav-title">
        <a href="/" target="_blank">XUN</a>
    </div>
    <section class="sidebar">
        <div id="sidebar-info" class="sidebar-info">
            <div class="sidebar-about">
                <p class="lead">
                    想写一个播放器想写一个传输工具想写一个通讯工具想在高速公路上自由coding一边听歌如果一个古代人技能点是写代码怎么办
                </p>
            </div>
            <div class="count">文章</div>
            <div class="social">
                <a href="https://github.com/cenjianxun" target="_blank" rel="noopener noreferrer">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-github">
                        <path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"/>
                        <path d="M9 18c-4.51 2-5-2-7-2"/> 
                        </svg>
                </a>
                <a href="" target="_blank" rel="noopener noreferrer">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor"  stroke-linecap="round" stroke-linejoin="round"
                        class="lucide lucide-twitter">
                        <path
                            d="M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z">
                        </path>
                    </svg>
                </a>
                <a href=""  target="_blank" rel="noopener noreferrer">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                        class="lucide lucide-mail">
                        <rect width="20" height="16" x="2" y="4" rx="2"></rect>
                        <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path>
                    </svg>
                </a>
                <a href=""  target="_blank" rel="noopener noreferrer">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                        class="lucide lucide-rss">
                        <path d="M4 11a9 9 0 0 1 9 9"></path>
                        <path d="M4 4a16 16 0 0 1 16 16"></path>
                        <circle cx="5" cy="19" r="1"></circle>
                    </svg>
                </a>
            </div>
        </div>
        
        
            

<div id="sidebar-toc" class="sidebar-toc">
    
    <header>
        <span class="toc-bar"></span>
        <h4 class="toc-header">操作｜shell命令</h4>
        <span class="toc-bar"></span>
    </header>
    
    <nav id="TableOfContents">
  <ul>
    <li><a href="#一些概念">一些概念</a></li>
    <li><a href="#shell独有的">shell独有的</a>
      <ul>
        <li>
          <ul>
            <li><a href="#取当前路径">取当前路径</a></li>
            <li><a href="#echo打印">echo打印</a></li>
            <li><a href="#条件测试">条件测试</a></li>
            <li><a href="#状态返回值">状态返回值</a></li>
          </ul>
        </li>
        <li><a href="#条件判断">条件判断</a>
          <ul>
            <li><a href="#语法">语法</a></li>
            <li><a href="#字符串">字符串</a></li>
            <li><a href="#数字">数字</a></li>
            <li><a href="#字符文件文件夹判断">字符、文件/文件夹判断</a></li>
            <li><a href="#逻辑">逻辑</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#常规数据类型">常规数据类型</a>
      <ul>
        <li>
          <ul>
            <li><a href="#列表">列表</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>
</div>
 


<script type="text/javascript" src="/js/toc.js" defer></script>




        

    </section>
    <section class="func">
        <div id="func-top" class="to-top">
            <a href="#top" target="_self">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 28 28" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    class="lucide lucide-arrow-big-up-dash">
                    <path d="M9 19h6" />
                    <path d="M9 15v-3H5l7-7 7 7h-4v3H9z" />
                </svg>
            </a>
        </div>
    </section>
</aside>
    <div class="content-container">
      <nav class="nav-container">
    <div class="nav-title">
        <a href="/" target="_blank">XUN</a>
    </div>
    <button type="button" class="drop-menu-button">
        <span class="menu-bar"></span>
        <span class="menu-bar"></span>
        <span class="menu-bar"></span>
    </button>
    <ul class="nav-menu-items"><li class="menu-item">
            <a href="/" target="_self">HOME</a>
        </li><li class="menu-item">
            <a href="/archive/" target="_self">ARCHIVE</a>
        </li><li class="menu-item">
            <a href="/notes/" target="_self">NOTES</a>
        </li><li class="menu-item">
            <a href="/about/" target="_self">ABOUT</a>
        </li>
    </ul>


</nav>
      <main class="content">
        <div class="page"><article class="post-block">
    <header class="post-header">
        <h1>操作｜shell命令</h1>
        <div class="post-time">Jun 30 2018</div>
    </header>

    
    <div class="post-content"><p>==了解== 熟悉 掌握 精通</p>
<h2 id="一些概念">一些概念 <a href="#%e4%b8%80%e4%ba%9b%e6%a6%82%e5%bf%b5" style="border:none;"></a></h2><p>shell默认命令阻塞</p>
<h2 id="shell独有的">shell独有的 <a href="#shell%e7%8b%ac%e6%9c%89%e7%9a%84" style="border:none;"></a></h2><h4 id="取当前路径">取当前路径 <a href="#%e5%8f%96%e5%bd%93%e5%89%8d%e8%b7%af%e5%be%84" style="border:none;"></a></h4><p>pwd：获取的是工作目录，而不是正执行脚本命令。<br>
意思是，从哪里调用的这个脚本，就显示哪里，而不是此脚本存在的路径。</p>
<p>$：<br>
<code>$0</code> 当前文件名。在zsh下会输出-zsh。<br>
<code>$1</code>，<code>$2</code>，<code>$3</code>&hellip; 输入的第几个参数。运行<code>./script.sh arg1 arg2 arg3</code>，第一个就是$1，以此类推。<br>
<code>$@</code>和<code>$*</code>，输入的全部参数。区别是<code>$@</code>的每个参数独立，类似list。<code>$*</code>参数当成一个整体，参数之间用 IFS（内部字段分隔符，默认为空格）分隔。</p>
<p>bash和zsh都适用的命令，获取当前执行脚本的父目录：</p>
<pre tabindex="0"><code># 此脚本文件的绝对路径
SCRIPT_FILE=$(readlink -f $0)

# 此脚本文件所在文件夹的绝对路径
SCRIPT_DIR=$(dirname $SCRIPT_FILE)

# 注意：这两行要分开写，不要合并成一句，否则变量内容为空。
</code></pre><h4 id="echo打印">echo打印 <a href="#echo%e6%89%93%e5%8d%b0" style="border:none;"></a></h4><p>不加引号：直接输出<br>
<strong>但是如果内容有空格，它只会识别第一个空格前的内容。所以这个方法不能处理带空格的，好比<code>path=/Users/Local Document</code>就不行。</strong></p>
<p>单引号：直接输出，不转义</p>
<pre tabindex="0"><code>n=3
echo &#39;$n&#39;
[打印]&gt;&gt; $n
</code></pre><p>它可以取代⬆️且不用担心空格</p>
<p>双引号：转义</p>
<pre tabindex="0"><code>n=3
echo &#34;$n&#34;
[打印]&gt;&gt; 3
</code></pre><p>需要提示的是，如果写的内容本身没有需要转义的，那它就退化成直接输出。比如<code>&quot;path=/Users/Local Document&quot;</code>和上面效果一样。</p>
<p>💡 所以一般变量保险起见要加引号，以防变量里有空格。</p>
<p>反引号：执行命令。相当于$()，且$()支持嵌套。但反引号支持的sh多。</p>
<pre tabindex="0"><code>USERS=`who | wc -l`
echo &#34;Logged in user are $USERS&#34;
[打印]&gt;&gt; Logged in user are 1
</code></pre><p>显示变量 前面加$<br>
var=value //赋值操作，等号左右空格var = value 是相等操作<br>
echo $var</p>

    <div class='notice patch'>
    
    <span class="point point4"></span>
    <span class="point point4"></span>
    <span class="point point4"></span>
    <span class="point point4"></span>
    

    
    <p>遇到的一个问题 涉及到引号的使用。<br>
当前用户目录都知道可以写成<code>~</code>，但是当定义了包含<code>~</code>的path时，<code>&quot;</code>本身不会转义。即：<br>
<code>$mypath=&quot;~/work&quot;</code><br>
然后再 <code>cp $mypath/file.txt /folder</code>时，第一个路径直接是<code>~/work</code>，而不是当作<code>/Users/你的用户名/work</code>，即双引号下它没有解析，而是直接当字符串用了。</p>
<p>解决这个问题比较方便的方式：</p>
<ol>
<li>定义的时候不加双引号，直接<code>$mypath=~/work</code></li>
<li>用<code>$HOME</code>代替<code>~</code>，写成<code>$mypath=$HOME/work</code></li>
</ol>
<p>我感觉第二个比较好一点。</p>
    </div>

<h4 id="条件测试">条件测试 <a href="#%e6%9d%a1%e4%bb%b6%e6%b5%8b%e8%af%95" style="border:none;"></a></h4><p><code>[</code> 和 <code>]</code> 用于条件测试；</p>
<h4 id="状态返回值">状态返回值 <a href="#%e7%8a%b6%e6%80%81%e8%bf%94%e5%9b%9e%e5%80%bc" style="border:none;"></a></h4><p>用 <code>echo $?</code> 查看<br>
返回0为成功。非0为错。</p>
<h3 id="条件判断">条件判断 <a href="#%e6%9d%a1%e4%bb%b6%e5%88%a4%e6%96%ad" style="border:none;"></a></h3><h4 id="语法">语法 <a href="#%e8%af%ad%e6%b3%95" style="border:none;"></a></h4><pre tabindex="0"><code>if [ command ];then
   // todo
elif [ command ];then
    // todo
else
    // todo
fi
</code></pre><h4 id="字符串">字符串 <a href="#%e5%ad%97%e7%ac%a6%e4%b8%b2" style="border:none;"></a></h4><p>相等：<code>=</code><br>
不等：<code>!=</code><br>
是否为空：①字符串本身 ②字符串前<code>-z</code>：空为真 ③字符串前<code>-n</code>：非空为真</p>
<h4 id="数字">数字 <a href="#%e6%95%b0%e5%ad%97" style="border:none;"></a></h4><p>A <code>x</code> B:<br>
=：<code>-eq</code>；!=：<code>-ne</code>；</p>
<blockquote>
<p>：<code>-gt</code>；&gt;=：<code>-ge</code>；<br>
&lt;：<code>-lt</code>；&lt;=：<code>-le</code>；</p>
</blockquote>
<h4 id="字符文件文件夹判断">字符、文件/文件夹判断 <a href="#%e5%ad%97%e7%ac%a6%e6%96%87%e4%bb%b6%e6%96%87%e4%bb%b6%e5%a4%b9%e5%88%a4%e6%96%ad" style="border:none;"></a></h4><p>一般用在if [ {判断条件} ] 处。反选为 if [ ! {判断条件} ]<br>
<strong>括号两端要留空格；结尾要写 fi</strong><br>
-e 对象【文件，包括目录】存在<br>
-d 文件夹【目录】存在 （判断对象是目录）<br>
-f 文件【常规文件，非目录or设备文件】存在<br>
-s 文件长度不为0<br>
-r/-w/-x 文件可读/可写/可执行<br>
比较：A <code>x</code> B<br>
<code>-nt</code>：A 比 B 新<br>
<code>-ot</code>：A 比 B 老<br>
<code>-ef</code>：AB指向同个文件</p>
<h4 id="逻辑">逻辑 <a href="#%e9%80%bb%e8%be%91" style="border:none;"></a></h4><p>或：<br>
<code>if (( a &gt; b )) || (( a &lt; c ))</code><br>
<code>if [[ $a &gt; $b ]] || [[ $a &lt; $c ]]</code><br>
<code>if [ $a -gt $b -o $a -lt $c ]</code></p>
<p>且：<br>
<code>if (( a &gt; b )) &amp;&amp; (( a &lt; c ))</code><br>
<code>if [[ $a &gt; $b ]] &amp;&amp; [[ $a &lt; $c ]]</code><br>
<code>if [ $a -gt $b -a $a -lt $c ]</code></p>
<p>非：<br>
<code>if [[ ! -d &quot;$dir&quot; ]]</code></p>
<h2 id="常规数据类型">常规数据类型 <a href="#%e5%b8%b8%e8%a7%84%e6%95%b0%e6%8d%ae%e7%b1%bb%e5%9e%8b" style="border:none;"></a></h2><h4 id="列表">列表 <a href="#%e5%88%97%e8%a1%a8" style="border:none;"></a></h4><p>定义：<br>
<code>aList=(value1 value2 value3)</code></p>
<p>追加：<br>
<code>aList+=(new_element)</code></p>
<p>输出：</p>
<pre tabindex="0"><code>echo ${aList[1]} # 第二个
echo ${aList[-3]} # 倒数第三个
echo ${aList[@]} # 全部
</code></pre><p>循环：</p>
<pre tabindex="0"><code>for i in ${aList[@]}; do
	echo $i
done
</code></pre></div>

    <div class="post-meta meta">
        

        <span class="tags-box">
            <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512" fill="currentColor"
                class="fas-tags">
                <path
                    d="M345 39.1L472.8 168.4c52.4 53 52.4 138.2 0 191.2L360.8 472.9c-9.3 9.4-24.5 9.5-33.9 .2s-9.5-24.5-.2-33.9L438.6 325.9c33.9-34.3 33.9-89.4 0-123.7L310.9 72.9c-9.3-9.4-9.2-24.6 .2-33.9s24.6-9.2 33.9 .2zM0 229.5V80C0 53.5 21.5 32 48 32H197.5c17 0 33.3 6.7 45.3 18.7l168 168c25 25 25 65.5 0 90.5L277.3 442.7c-25 25-65.5 25-90.5 0l-168-168C6.7 262.7 0 246.5 0 229.5zM144 144a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z" />
            </svg>
            
            
            <a class="tag-link" href="/%20/tags/shell">shell</a>
            
            ,&nbsp;
            <a class="tag-link" href="/%20/tags/%E6%A6%82%E5%BF%B5">概念</a>
            
        </span>
        
    </div>

    <div class="post-paginator">
        
        
        <span class="pag-prev">
            
            
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"
                class="lucide lucide-arrow-left-from-line">
                <path d="M3 19V5" />
                <path d="m13 6-6 6 6 6" />
                <path d="M7 12h14" />
            </svg>
            </svg>
            <a href="https://cenjianxun.github.io/posts/%E6%80%BB%E7%BB%93python%E5%BA%95%E5%B1%82/" class="jump-post">总结｜Python底层</a>
            
        </span>

        <span class="pag-next">
            
            
            <a href="https://cenjianxun.github.io/posts/%E6%93%8D%E4%BD%9C%E6%89%8B%E5%86%8Cpython-pandas/" class="jump-post">操作手册｜python - pandas</a>
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"
                class="lucide lucide-arrow-right-to-line">
                <path d="M17 12H3" />
                <path d="m11 18 6-6-6-6" />
                <path d="M21 5v14" />
            </svg>
            
        </span>

    </div>

    

</article>


    </div>
      </main>
      <footer class="footer">
    <p> © 2018 - 2024 &nbsp; XUN
    </p>
</footer>


    </div>
  </div>
</body>
</html>